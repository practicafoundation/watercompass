server {
    listen 80;
    server_name watercompass.info;

    location /static/ {
      root /home/ubuntu/watercompass/wcompass;
    }

    location / {
      include proxy_params;
      return 301 http://watercompass.info/technologies;
    }

    location /technologies {
      include proxy_params;
      proxy_pass http://unix:/run/gunicorn.sock;
    }
}

server {
	server_name watercompass.info www.watercompass.info;

	listen [::]:443 ssl ipv6only=off;
	listen 443 ssl;
	ssl_certificate /etc/letsencrypt/live/watercompass.info/fullchain.pem;
	ssl_certificate_key /etc/letsencrypt/live/watercompass.info/privkey.pem;
	include /etc/letsencrypt/options-ssl-nginx.conf;
}

server {
  listen 80 default_server;
  listen [::]:80 default_server;

  server_name watercompass.info www.watercompass.info;

  if ($host = www.watercompass.info) {
		return 301 https://watercompass.info$request_uri;
	}

	if ($host = watercompass.info) {
		return 301 https://$host$request_uri;
	}

	return 404;
}


server {
    listen 80;

    # Listen to your server ip address
    server_name 3.120.62.237;

    # Redirect all traffic comming from your-server-ip to your domain
    return 301 $scheme://watercompass.info$request_uri;
}
